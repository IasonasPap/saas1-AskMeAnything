{"ast":null,"code":"var _jsxFileName = \"/home/fay/Desktop/saas1-AskMeAnything/frontend-react/src/components/profile.component.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport FullWidthTabs from \"./tabPanel.component.js\";\nimport AuthService from \"../services/auth.service.js\";\nimport UserService from \"../services/user.service.js\";\nimport \"../styling/profile.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [myQuestions, setMyQuestions] = useState([]);\n  const [myAnswers, setMyAnswers] = useState([]);\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [repeatNewPassword, setRepeatNewPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    const user = AuthService.getCurrentUser();\n\n    if (user) {\n      setCurrentUser(user);\n      UserService.getUserQuestions(user.user.id).then(response => {\n        setMyQuestions(response.data);\n      }, error => {\n        const _content = error.response && error.response.data || error.message || error.toString();\n\n        setMyQuestions(_content);\n      });\n      UserService.getUserAnswers(user.user.id).then(response => {\n        setMyAnswers(response.data);\n      }, error => {\n        const _content = error.response && error.response.data || error.message || error.toString();\n\n        setMyAnswers(_content);\n      });\n    }\n  }, []);\n\n  const handleNewPasswordChange = event => setNewPassword(event.target.value);\n\n  const handleRepeatNewPasswordChange = event => {\n    if (newPassword !== event.target.value) {\n      setMessage(\"Both passwords should match !\");\n    } else {\n      setMessage(\"\");\n    }\n\n    setRepeatNewPassword(event.target.value);\n  };\n\n  const handleSubmit = () => {\n    if (newPassword !== repeatNewPassword) {\n      setMessage(\"Both passwords should match !\");\n    } else {\n      AuthService.updatePassword(currentUser.username, newPassword).then(() => {\n        handleExit();\n      });\n    }\n  };\n\n  const handleSettings = () => {\n    const profileSettings = document.getElementById(\"profile-settings\");\n    profileSettings.style.display = \"block\";\n  };\n\n  const handleExit = () => {\n    const profileSettings = document.getElementById(\"profile-settings\");\n    profileSettings.style.display = \"none\";\n  };\n\n  const handleDelete = () => {\n    AuthService.deleteCurrentUser(currentUser.username).then(() => {\n      AuthService.logout();\n      history.push(\"/home\");\n      window.location.reload();\n    }, error => {\n      const _content = error.response && error.response.data || error.message || error.toString();\n\n      setMyQuestions(_content);\n    });\n  };\n\n  return !currentUser ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 22\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-name\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: currentUser.username + \"'s profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-gear\",\n        style: {\n          fontSize: \"24px\"\n        },\n        onClick: handleSettings\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"settings-container\",\n      id: \"profile-settings\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"close\",\n          onClick: handleExit,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: \"Profile Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-lock\",\n              style: {\n                fontSize: \"15px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 19\n            }, this), \" change password\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"change-password\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"feature-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \" New Password \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                value: newPassword,\n                onChange: handleNewPasswordChange,\n                id: \"new-password\",\n                placeholder: \"New Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \" Repeat New Password \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                value: repeatNewPassword,\n                onChange: handleRepeatNewPasswordChange,\n                id: \"repeat-new-password\",\n                placeholder: \"Repeat New Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"alert alert-danger\",\n                role: \"alert\",\n                children: message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"submit-btn\",\n              onClick: handleSubmit,\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-close\",\n              style: {\n                fontSize: \"15px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 19\n            }, this), \" delete my profile\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-btn delete-user-btn\",\n            onClick: handleDelete,\n            children: \"Delete Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-user\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"username: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info\",\n                children: currentUser.user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"fullname: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info\",\n                children: currentUser.user.fullName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"email: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"info\",\n                children: currentUser.user.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 26\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-stats\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: myQuestions.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"questions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            id: \"my-answers\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: myAnswers.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"answers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-questions\",\n      children: /*#__PURE__*/_jsxDEV(FullWidthTabs, {\n        myQuestions: myQuestions,\n        myAnswers: myAnswers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 6\n  }, this);\n};\n\n_s(Profile, \"KgS8NZpjykB+FsV6I5QMCur/uBk=\", false, function () {\n  return [useHistory];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/home/fay/Desktop/saas1-AskMeAnything/frontend-react/src/components/profile.component.js"],"names":["React","useState","useEffect","useHistory","FullWidthTabs","AuthService","UserService","Profile","history","currentUser","setCurrentUser","undefined","myQuestions","setMyQuestions","myAnswers","setMyAnswers","newPassword","setNewPassword","repeatNewPassword","setRepeatNewPassword","message","setMessage","user","getCurrentUser","getUserQuestions","id","then","response","data","error","_content","toString","getUserAnswers","handleNewPasswordChange","event","target","value","handleRepeatNewPasswordChange","handleSubmit","updatePassword","username","handleExit","handleSettings","profileSettings","document","getElementById","style","display","handleDelete","deleteCurrentUser","logout","push","window","location","reload","fontSize","textAlign","fullName","email","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {useHistory} from \"react-router-dom\"\nimport FullWidthTabs from \"./tabPanel.component.js\";\nimport AuthService from \"../services/auth.service.js\";\nimport UserService from \"../services/user.service.js\";\nimport \"../styling/profile.css\";\n\nconst Profile = () => {\n\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [myQuestions,setMyQuestions] = useState([]);\n  const [myAnswers,setMyAnswers] = useState([]);\n  const [newPassword,setNewPassword] = useState(\"\");\n  const [repeatNewPassword,setRepeatNewPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  useEffect(() => {\n    const user = AuthService.getCurrentUser();\n\n    if (user) {\n      setCurrentUser(user);\n      UserService.getUserQuestions(user.user.id).then(\n        (response) => {\n          setMyQuestions(response.data);\n        },\n        (error) => {\n          const _content =\n            (error.response && error.response.data) ||\n            error.message ||\n            error.toString();\n  \n          setMyQuestions(_content);\n        }\n      );\n\n      UserService.getUserAnswers(user.user.id).then(\n        (response) => {\n          setMyAnswers(response.data);\n        },\n        (error) => {\n          const _content =\n            (error.response && error.response.data) ||\n            error.message ||\n            error.toString();\n  \n          setMyAnswers(_content);\n        }\n      );\n    }\n    \n  }, []);\n\n  const handleNewPasswordChange = (event) => setNewPassword(event.target.value)\n\n  const handleRepeatNewPasswordChange = (event) => {\n    if(newPassword !== event.target.value) {\n      setMessage(\"Both passwords should match !\")\n    } else {\n      setMessage(\"\")\n    }\n    setRepeatNewPassword(event.target.value)\n  }\n\n  const handleSubmit = () => {    \n    if(newPassword !== repeatNewPassword) {\n      setMessage(\"Both passwords should match !\")\n    } else {\n      AuthService.updatePassword(currentUser.username,newPassword).then(\n        () => {\n          handleExit();\n        }\n      );\n    }\n  }\n\n  const handleSettings = () => {\n    const profileSettings = document.getElementById(\"profile-settings\");\n    profileSettings.style.display = \"block\";\n  }\n\n  const handleExit = () => {\n    const profileSettings = document.getElementById(\"profile-settings\");\n    profileSettings.style.display = \"none\";\n  }\n\n  const handleDelete = () => {\n    AuthService.deleteCurrentUser(currentUser.username).then(\n      () => {\n        AuthService.logout()\n        history.push(\"/home\");\n        window.location.reload();\n        \n      },\n      (error) => {\n        const _content =\n          (error.response && error.response.data) ||\n          error.message ||\n          error.toString();\n\n        setMyQuestions(_content);\n      }\n    );\n  }\n\n  return (\n    (!currentUser ? (<div>Loading...</div>) :\n    (<div className=\"profile-container\">\n      <div className=\"profile-name\">\n        <h2>{currentUser.username + \"'s profile\"}</h2>       \n        <i className=\"fa fa-gear\" style={{fontSize:\"24px\"}} onClick={handleSettings}></i>\n      </div>\n      \n      <div className=\"settings-container\" id=\"profile-settings\">\n        <div className=\"modal-content\">\n          <span className=\"close\" onClick={handleExit}>&times;</span>\n          <h1 style={{textAlign:\"center\"}}>Profile Settings</h1>\n          \n              <div className=\"settings\">\n              <h4><i className=\"fa fa-lock\" style={{fontSize:\"15px\"}}></i> change password</h4>\n              <div className=\"change-password\">\n                <div className=\"feature-body\">\n                  <label> New Password </label>\n                  <input \n                    type=\"password\" \n                    value={newPassword} \n                    onChange={handleNewPasswordChange}\n                    id=\"new-password\"\n                    placeholder=\"New Password\"\n                  />\n\n                  <label> Repeat New Password </label>\n                  <input \n                    type=\"password\" \n                    value={repeatNewPassword} \n                    onChange={handleRepeatNewPasswordChange}\n                    id=\"repeat-new-password\"\n                    placeholder=\"Repeat New Password\"\n\n                  />\n                </div>\n                {message && (\n                <div className=\"form-group\">\n                  <div className=\"alert alert-danger\" role=\"alert\">\n                    {message}\n                  </div>\n                </div>\n                )}\n\n                <button className=\"submit-btn\" onClick={handleSubmit}>\n                  Submit\n                </button>\n              </div>\n              <h4><i className=\"fa fa-close\" style={{fontSize:\"15px\"}}></i> delete my profile</h4>\n              <button className=\"cancel-btn delete-user-btn\" onClick={handleDelete}>\n                Delete Profile\n              </button>\n              </div>\n        </div>\n\n      </div>\n      <div className=\"profile-info\">\n        <div className=\"profile-user\">\n          <ul>\n            <li>\n              <h3>username: <span className=\"info\">{currentUser.user.username}</span></h3>\n            </li>\n            <li>\n              <h3>fullname: <span className=\"info\">{currentUser.user.fullName}</span></h3>\n            </li>\n            <li>\n              <h3>email: <span className=\"info\">{currentUser.user.email}</span></h3>\n            </li>\n          </ul>\n        </div>\n\n        <div className=\"profile-stats\">\n          <ul>\n            <li>\n              <h1>{myQuestions.length}</h1>\n              <i>questions</i>\n            </li>\n            <li id=\"my-answers\">\n              <h1>{myAnswers.length}</h1>\n              <i>answers</i>\n            </li>\n          </ul>\n        </div>\n\n      </div>\n\n      <div className=\"profile-questions\">\n        <FullWidthTabs myQuestions={myQuestions} myAnswers={myAnswers}></FullWidthTabs>\n      </div>\n\n    </div>))\n  );\n};\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}